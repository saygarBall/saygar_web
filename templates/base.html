<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f4f6f9;
    }
    .info-topbar {
      background: #f8f9fa;
      border-bottom: 1px solid #ccc;
      padding: 10px 20px;
      font-size: 0.9rem;
    }
    .user-profile {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 5px;
    }
  </style>
  {% block head_extra %}{% endblock %}
</head>
<body>

<!-- Greeting + Clock -->
<div class="info-topbar text-center">
  <div id="clockbox" class="mb-1 text-muted">üïì</div>
  <div id="greetingbox" class="mb-1">üëã</div>

  {% if user %}
    <div class="text-dark mb-1">
      {% if user.profile_picture %}
        <img src="{{ url_for('static', filename='uploads/' ~ user.profile_picture) }}" class="user-profile" alt="profile">
      {% endif %}
      üë§ {{ user.firstname }} {{ user.lastname }} ({{ user.rank }})
    </div>
  {% else %}
    <div class="text-danger mb-1">üîí ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div>
  {% endif %}
</div>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
  <div class="container">
    <a class="navbar-brand" href="{{ url_for('home.home') }}">‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarMain">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="{{ url_for('index2') }}">‡∏ü‡∏≠‡∏£‡∏±‡πà‡∏°</a></li>
        {% if 'user_id' in session %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('account') }}">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a></li>
          {% if user.rank == 'user_administrator_and_manage_systems' %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('manage_users') }}">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin_dashboard') }}">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°</a></li>
          {% elif user.rank == 'user_admin' %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin_dashboard') }}">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°</a></li>
          {% endif %}
          <li class="nav-item"><a class="nav-link text-warning" href="{{ url_for('logout') }}">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
        {% else %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('register') }}">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<!-- Hero Section -->
<div class="bg-light py-4 shadow-sm border-bottom">
  <div class="container text-center">
    <h1 class="text-primary">üìå ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤: {{ self.title() | safe }}</h1>

    {% block page_description %}{% endblock %}

    <!-- Search Bar -->
    <div class="row justify-content-center mt-4">
      <div class="col-md-8 col-lg-6">
        <form class="d-flex" action="{{ url_for('search.search') }}" method="GET">
          <input class="form-control me-2" type="search" name="q" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°..." aria-label="Search">
          <button class="btn btn-primary" type="submit"><i class="fas fa-search"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="container mt-4">
  {% block content %}{% endblock %}
</div>

<!-- Footer -->
<footer class="text-center mt-5 bg-dark text-white py-3">
  <p>¬© 2025 ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì | <a href="#" class="text-light">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a></p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const tday = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  const tmonth = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  function GetClock() {
    const d = new Date();
    let nhour = d.getHours();
    const nmin = d.getMinutes().toString().padStart(2, '0');
    const nsec = d.getSeconds().toString().padStart(2, '0');
    const ap = nhour < 12 ? " AM" : " PM";
    if (nhour === 0) nhour = 12;
    else if (nhour > 12) nhour -= 12;
    const timeString = `${tday[d.getDay()]}, ${tmonth[d.getMonth()]} ${d.getDate()}, ${d.getFullYear()} ${nhour}:${nmin}:${nsec}${ap}`;
    document.getElementById('clockbox').innerHTML = timeString;
    let greeting;
    if (d.getHours() < 12) greeting = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡∏öüôè";
    else if (d.getHours() === 12) greeting = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡∏öüôè";
    else if (d.getHours() >= 13 && d.getHours() <= 17) greeting = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢üôè";
    else greeting = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ôüôè";
    document.getElementById('greetingbox').innerHTML = greeting;
    setTimeout(GetClock, 1000);
  }
  window.onload = GetClock;
</script>
</body>
</html>
